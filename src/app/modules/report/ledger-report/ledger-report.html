<div class="p-5">
  <div class="border border-surface bg-primary-contrast rounded-2xl py-5 px-5">
    <div class="flex justify-between items-center mb-4">
      <div>
        <h1 class="text-3xl font-medium mb-1">Ledger Report</h1>
        <p class="text-sm text-muted-color">
          View detailed financial transactions and account balances
        </p>
      </div>
    </div>

    <div class="border border-surface bg-primary-contrast rounded-t-xl">
      <div
        class="grid gap-y-1 grid-cols-12 gap-x-4 py-5 px-5 bg-slate-50 dark:bg-slate-800 rounded-t-xl shadow-inner"
      >
        <div class="col-span-3">
          <div>Entity Name</div>
          <p-select
            class="mb-4 w-80"
            panelStyleClass="w-60"
            [options]="entityOptions()"
            [filter]="true"
            [showClear]="true"
            placeholder="Select entity"
            fluid
          />
        </div>
        <div class="col-span-3">
          <div>Vendor Name</div>
          <p-multiselect fluid [options]="vendorOptions()" placeholder="Choose vendor" />
        </div>
        <div class="col-span-3">
          <div>Date From</div>
          <p-datepicker fluid />
        </div>
        <div class="col-span-3">
          <div>Date To</div>
          <p-datepicker fluid />
        </div>
        <div class="col-span-12 flex items-center justify-end">
          <p-button
            icon="pi pi-print"
            aria-label="Download PDF"
            variant="outlined"
            severity="contrast"
            label="Download PDF"
            class="mr-2"
          />
          <p-button
            icon="pi pi-file-excel"
            aria-label="Download Excel"
            variant="outlined"
            severity="contrast"
            label="Download Excel"
            class="mr-2"
          />
          <p-button icon="pi pi-search" severity="contrast" label="Search" />
        </div>
      </div>

      <div class="col-span-12">
        <p-table
          #dt
          [value]="ledgerData()"
          stripedRows="true"
          size="small"
          showGridlines="true"
          [scrollable]="true"
          scrollHeight="500px"
          class="table-dashboard-invoice"
          [resizableColumns]="true"
          columnResizeMode="expand"
          (onFilter)="onTableFilter($event)"
          [globalFilterFields]="[
            'portfolioName',
            'voucherType',
            'tranNo',
            'invoiceNo',
            'particulars'
          ]"
        >
          <ng-template #header>
            <tr>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Invoice Date</div>
              </th>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Paid Date</div>
              </th>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Voucher Type</div>
              </th>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Transaction No</div>
              </th>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Invoice No</div>
              </th>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Portfolio Name</div>
              </th>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Particulars</div>
              </th>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Debit</div>
              </th>
              <th pResizableColumn>
                <div class="flex items-center justify-between">Credit</div>
              </th>
              <th>
                <div class="flex items-center justify-between">Balance</div>
              </th>
            </tr>
          </ng-template>
          <ng-template #body let-ledger>
            <tr>
              <td>{{ ledger.invoiceDate }}</td>
              <td>{{ ledger.paidDate }}</td>
              <td>
                @if (ledger.voucherType === 'Payment') {
                <p-tag severity="success" value="Payment" />
                } @else {
                <p-tag severity="warn" value="Invoice" />
                }
              </td>
              <td>{{ ledger.tranNo }}</td>
              <td>{{ ledger.invoiceNo }}</td>
              <td>{{ ledger.portfolioName }}</td>
              <td>{{ ledger.particulars }}</td>
              <td>
                <div class="text-right">
                  {{ ledger.debit > 0 ? '$' + ledger.debit : '-' }}
                </div>
              </td>
              <td>
                <div class="text-right">
                  {{ ledger.credit > 0 ? '$' + ledger.credit : '-' }}
                </div>
              </td>
              <td>
                <div class="text-right">${{ ledger.balance }}</div>
              </td>
            </tr>
          </ng-template>
          <ng-template #footer>
            <tr>
              <td
                colspan="7"
                class="font-semibold text-xs sm:text-xs md:text-xs lg:text-sm xl:text-base"
              >
                Total
              </td>
              <td>
                <div class="text-right font-semibold">${{ totals().debit }}</div>
              </td>
              <td>
                <div class="text-right font-semibold">${{ totals().credit }}</div>
              </td>
              <td>
                <div class="text-right font-semibold">${{ totals().balance }}</div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
</div>
