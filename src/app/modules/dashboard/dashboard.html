<div class="p-5">
  <div class="grid grid-cols-12">
    <div class="col-span-12 grid grid-cols-12 mb-3 lg:mb-0">
      <div class="col-span-12 lg:col-span-6">
        <p class="text-sm text-muted-color mb-1">Wednesday, 25 November</p>
        <h1 class="text-4xl mb-5 font-medium">Welcome In, Aby George</h1>
      </div>
      <div class="col-span-12 lg:col-span-6 flex justify-end items-center">
        <p-button icon="pi pi-building" label="Add Entity" class="mr-2" />
        <p-button icon="pi pi-user-plus" label="Add User" />
      </div>
      <!-- <h1 class="text-4xl font-medium">Dashboard</h1>
      <p-breadcrumb styleClass="p-0! mb-4" [home]="home" [model]="items" /> -->
    </div>
  </div>
  <div class="grid grid-cols-12 gap-4">
    <div class="col-span-12 lg:col-span-6">
      <div
        class="border border-surface bg-primary-contrast rounded-2xl py-5 px-5 flex flex-col h-full"
      >
        <div class="items-center gap-6 mb-2">
          <div class="text-2xl font-medium">Portfolio</div>
          <div class="text-sm text-muted-color">Get quick insights to invoice details</div>
        </div>
        <p-table
          #dtPortfolio
          [value]="portfolio"
          stripedRows="true"
          size="small"
          showGridlines="true"
          [scrollable]="true"
          scrollHeight="265px"
          (onFilter)="onTableFilter($event)"
          [globalFilterFields]="['code', 'name', 'region', 'amount']"
        >
          <ng-template #header>
            <tr>
              <th>
                <div class="flex items-center justify-between">
                  Code
                  <p-columnFilter
                    type="text"
                    field="code"
                    display="menu"
                    showMatchModes="false"
                    showAddButton="false"
                    showOperator="false"
                    matchMode="contains"
                  />
                </div>
              </th>
              <th>
                <div class="flex items-center justify-between">
                  Portfolio
                  <p-columnFilter
                    type="text"
                    field="name"
                    display="menu"
                    showMatchModes="false"
                    showAddButton="false"
                    showOperator="false"
                    matchMode="contains"
                  />
                </div>
              </th>
              <th>
                <div class="flex items-center justify-between">
                  Region
                  <p-columnFilter
                    type="text"
                    field="region"
                    display="menu"
                    showMatchModes="false"
                    showAddButton="false"
                    showOperator="false"
                    matchMode="contains"
                  />
                </div>
              </th>
              <th>
                <div class="flex items-center justify-between">
                  Amount
                  <p-columnFilter
                    type="text"
                    field="amount"
                    display="menu"
                    showMatchModes="false"
                    showAddButton="false"
                    showOperator="false"
                    matchMode="contains"
                  />
                </div>
              </th>
            </tr>
          </ng-template>
          <ng-template #body let-product>
            <tr>
              <td>{{ product.code }}</td>
              <td>{{ product.name }}</td>
              <td>{{ product.region }}</td>
              <td>
                <div class="text-right">${{ product.amount }}</div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
    <div class="col-span-12 lg:col-span-6">
      <div
        class="border grid gap-2 grid-cols-12 border-surface bg-primary-contrast rounded-2xl h-full py-5 px-5"
      >
        <div class="col-span-12 flex-1">
          <div class="text-2xl font-medium">Summary</div>
          <div class="text-sm text-muted-color">Get quick insights to invoice details</div>
        </div>
        <!-- <div
          class="relative col-span-6 lg:col-span-4 border rounded-2xl px-4 py-3 flex flex-col justify-between cursor-pointer hover:shadow-lg hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 ease-in-out border-blue-200 bg-blue-50 hover:border-blue-300 dark:border-blue-700/50 dark:bg-blue-900/20 dark:hover:border-blue-600 dark:text-blue-100"
        > -->
        <!-- Replace the card divs with: -->
        <div class="relative col-span-6 lg:col-span-4">
          <app-stat-card
            title="Received Invoices"
            value="128"
            subtitle="Amount - $4000"
            color="indigo"
          >
          </app-stat-card>
        </div>
        <div class="relative col-span-6 lg:col-span-4">
          <app-stat-card title="Pending Invoices" value="70" subtitle="Amount - $805" color="amber">
          </app-stat-card>
        </div>
        <div class="relative col-span-6 lg:col-span-4">
          <app-stat-card
            title="Approved Invoices"
            value="27"
            subtitle="Amount - $1790"
            color="green"
          >
          </app-stat-card>
        </div>

        <div class="relative col-span-6 lg:col-span-4">
          <app-stat-card title="Rejected Invoices" value="4" subtitle="Amount - $1622" color="rose">
          </app-stat-card>
        </div>

        <div class="relative col-span-6 lg:col-span-4">
          <app-stat-card
            title="Scheduled For Release"
            value="12"
            subtitle="Amount - $422"
            color="purple"
          >
          </app-stat-card>
        </div>

        <div class="relative col-span-6 lg:col-span-4">
          <app-stat-card title="Paid Invoices" value="215" subtitle="Amount - $422" color="sky">
          </app-stat-card>
        </div>
      </div>
    </div>
  </div>
  <div class="col-span-12 mt-4">
    <div class="border border-surface bg-primary-contrast rounded-2xl py-5 px-5 flex flex-col">
      <div class="grid grid-cols-12 mb-2">
        <div class="col-span-12 mb-2 lg:mb-0 lg:col-span-3 flex justify-centercenter flex-col">
          <h3 class="text-2xl font-medium">Invoices</h3>
          <p class="text-sm text-muted-color">Manage all your invoices here</p>
        </div>
        <div class="col-span-12 lg:col-span-9 lg:justify-end flex items-center">
          <input
            class="mr-2 lg:w-auto"
            pInputText
            type="text"
            placeholder="Search"
            (input)="dt.filterGlobal($event.target.value, 'contains')"
          />
          <p-button
            icon="pi pi-file-check"
            severity="contrast"
            label="Review Invoices"
            class="mr-2"
            [disabled]="selectedInvoices.length === 0"
            (onClick)="onReviewInvoice()"
          />
          <p-button
            icon="pi pi-print"
            aria-label="Download PDF"
            variant="outlined"
            severity="contrast"
            label="Download PDF"
            [disabled]="selectedInvoices.length === 0"
            class="mr-2"
          />
          <p-button
            icon="pi pi-file-excel"
            aria-label="Download Excel"
            variant="outlined"
            severity="contrast"
            [disabled]="selectedInvoices.length === 0"
            label="Download Excel"
          />
        </div>
      </div>
      <p-table
        #dt
        [value]="invoices"
        [(selection)]="selectedInvoices"
        dataKey="invoiceNumber"
        stripedRows="true"
        size="small"
        showGridlines="true"
        [scrollable]="true"
        scrollHeight="370px"
        class="table-dashboard-invoice"
        [resizableColumns]="true"
        columnResizeMode="expand"
        (onFilter)="onTableFilter($event)"
        [globalFilterFields]="['fundName', 'vendorName', 'invoiceNumber', 'status']"
      >
        <ng-template #header>
          <tr>
            <th><p-tableHeaderCheckbox /></th>
            <th pResizableColumn>
              <div class="flex items-center justify-between">
                Portfolio
                <p-columnFilter
                  type="text"
                  field="fundName"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                  matchMode="contains"
                />
              </div>
            </th>
            <th pResizableColumn>
              <div class="flex items-center justify-between">
                Vendor
                <p-columnFilter
                  type="text"
                  field="vendorName"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                  matchMode="contains"
                />
              </div>
            </th>
            <th pResizableColumn>
              <div class="flex items-center justify-between">
                Invoice No
                <p-columnFilter
                  type="text"
                  field="invoiceNumber"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                  matchMode="contains"
                />
              </div>
            </th>
            <th pResizableColumn>
              <div class="flex items-center justify-between">
                Invoice Date
                <p-columnFilter
                  type="date"
                  field="invoiceDate"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                ></p-columnFilter>
              </div>
            </th>
            <th pResizableColumn>
              <div class="flex items-center justify-between">
                Due Date
                <p-columnFilter
                  type="date"
                  field="dueDate"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                ></p-columnFilter>
              </div>
            </th>
            <th pResizableColumn>
              <div class="flex items-center justify-between">
                Expences Type
                <p-columnFilter
                  type="text"
                  field="expenseType"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                  matchMode="contains"
                ></p-columnFilter>
              </div>
            </th>
            <th pResizableColumn>
              <div class="flex items-center justify-between">
                Currency
                <p-columnFilter
                  type="text"
                  field="currency"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                  matchMode="contains"
                ></p-columnFilter>
              </div>
            </th>
            <th pResizableColumn>
              <div class="flex items-center justify-between">
                Status
                <p-columnFilter
                  type="text"
                  field="status"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                  matchMode="contains"
                ></p-columnFilter>
              </div>
            </th>
            <th>
              <div class="flex items-center justify-between">
                Gross Amount
                <p-columnFilter
                  type="text"
                  field="amount"
                  display="menu"
                  showMatchModes="false"
                  showAddButton="false"
                  showOperator="false"
                  matchMode="contains"
                ></p-columnFilter>
              </div>
            </th>
          </tr>
        </ng-template>
        <ng-template #body let-invoice>
          <tr>
            <td>
              <p-tableCheckbox [value]="invoice" />
            </td>
            <td (click)="onInvoiceRowSelect(invoice)">{{ invoice.fundName }}</td>
            <td (click)="onInvoiceRowSelect(invoice)">{{ invoice.vendorName }}</td>
            <td (click)="onInvoiceRowSelect(invoice)">{{ invoice.invoiceNumber }}</td>
            <td (click)="onInvoiceRowSelect(invoice)">{{ invoice.invoiceDate }}</td>
            <td (click)="onInvoiceRowSelect(invoice)">{{ invoice.dueDate }}</td>
            <td (click)="onInvoiceRowSelect(invoice)">{{ invoice.expenseType }}</td>
            <td (click)="onInvoiceRowSelect(invoice)">{{ invoice.currency }}</td>
            <td (click)="onInvoiceRowSelect(invoice)">
              <p-tag
                [value]="invoice.status"
                [severity]="utilityService.getSeverity(invoice.status)"
              />
            </td>
            <td (click)="onInvoiceRowSelect(invoice)">
              <div class="text-right">${{ invoice.grossAmount }}</div>
            </td>
          </tr>
        </ng-template>
        <ng-template #footer>
          <tr>
            <td colspan="9" class="font-semibold text-xl">Total</td>
            <td>
              <div class="text-right font-semibold">${{ filteredTotal }}</div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
