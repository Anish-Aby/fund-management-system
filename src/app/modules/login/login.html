<main class="grid grid-cols-12 w-full h-full p-0 m-0">
  <section class="hidden lg:block lg:col-span-4 p-0 h-full relative" aria-label="Brand banner">
    <div class="banner h-full"></div>
    <header class="absolute top-4 left-4">
      <div class="logo mb-2"></div>
      <h2 class="text-white text-xl font-bold">Management System</h2>
    </header>
    <div class="absolute bottom-4 left-4">
      <p class="text-white text-xl max-w-md font-semibold mb-5">
        Manage your funds effortlessly with our powerful fund management tool
      </p>
    </div>
  </section>
  <section
    class="col-span-12 px-4 lg:px-0 lg:col-span-8 flex items-center justify-center"
    aria-label="Login form"
  >
    <p-carousel
      [value]="forms()"
      [numVisible]="1"
      [numScroll]="1"
      [page]="currentPage()"
      [showIndicators]="false"
      [showNavigators]="false"
    >
      <ng-template let-form pTemplate="item">
        <div class="flex items-center justify-center flex-col h-full">
          @switch (form.type) { @case ('login') {
          <div>
            <h1 class="text-4xl font-medium mb-1">Welcome back to FinLab</h1>
            <div class="flex items-center justify-center">
              <p class="mt-2 text-sm mb-8 text-muted-color max-w-md text-center">
                Manage your funds effortlessly with our powerful fund management tool
              </p>
            </div>
            <form [formGroup]="loginForm" class="w-full" (keydown.enter)="onLogin()">
              <label for="email" class="text-muted-color mb-2 block">Email</label>
              <input
                class="mb-4"
                id="email"
                fluid
                type="email"
                pInputText
                formControlName="email"
              />
              <label for="password" class="text-muted-color mb-2 block">Password</label>
              <p-password
                id="password"
                fluid
                class="mb-4"
                [toggleMask]="true"
                [feedback]="false"
                formControlName="password"
              />
              <p-button
                styleClass="mb-8 -ml-2"
                size="small"
                icon="pi pi-key"
                label="Forgot Password?"
                [link]="true"
              />
              <p-button
                type="button"
                icon="pi pi-sign-in"
                styleClass="w-full"
                label="Login"
                (onClick)="onLogin()"
                [disabled]="!loginForm.valid"
                [loading]="loginLoading()"
              />
            </form>
          </div>
          } @case ('otp') {
          <div class="flex w-90 lg:w-auto flex-col items-center justify-center">
            <h1 class="text-4xl text-center font-medium mb-1">Authenticate Your Account</h1>
            <p class="mt-2 text-sm mb-8 text-muted-color max-w-md text-center">
              Please enter the code sent to your email.
            </p>
            <p-inputotp [length]="6" [integerOnly]="true" (onChange)="onOtpChange($event)">
              <ng-template #input let-token let-events="events" let-index="index">
                <input
                  type="text"
                  [maxLength]="1"
                  (input)="events.input($event)"
                  (keydown)="events.keydown($event)"
                  [attr.value]="token"
                  class="custom-otp-input"
                  tabindex="-1"
                />
                <div *ngIf="index === 3" class="px-4">
                  <i class="pi pi-minus"></i>
                </div>
              </ng-template>
            </p-inputotp>
            <div class="flex w-full mt-8 justify-between">
              <p-button
                icon="pi pi-refresh"
                label="Resend Code"
                [link]="true"
                class="p-0"
                [disabled]="otpLoading()"
              />
              <p-button
                type="button"
                icon="pi pi-sign-in"
                label="Submit Code"
                [loading]="otpLoading()"
                (onClick)="onVerifyOtp()"
              />
            </div>
            <div class="flex w-full mt-8 items-center justify-start">
              <p-button
                type="button"
                (onClick)="navigateToLogin()"
                severity="secondary"
                icon="pi pi-arrow-left"
                label="Go Back"
                [disabled]="otpLoading()"
              />
            </div>
          </div>
          } }
        </div>
      </ng-template>
    </p-carousel>
  </section>
</main>
